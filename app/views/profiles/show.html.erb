<!-- ============ TITLE START ============ -->

  <section id="title">
    <div class="container">
      <div class="row">
        <div class="col-sm-12 text-center">
          <h1><%= @profile.name %></h1>
          <h4><%= @profile.title %></h4>
        </div>
      </div>
    </div>
  </section>

  <!-- ============ TITLE END ============ -->

  <!-- ============ CONTENT START ============ -->

	<section id="jobs">
		<div class="container">
			<div class="row">
				<div class="col-sm-8">
					<article>
            <% if @profile.user.role == 'company' %>
              <h2>About this company</h2>
            <% elsif @profile.user.role == 'candidate' %>
              <h2>About Me</h2>
            <% end %>

            <% if @profile.user.role == 'candidate' %>
              <%= image_tag @profile.image_url(:thumb), class: 'pull-left', alt: "#{@profile.name}'s photo'" %>
            <% end %>

						<p><%= @profile.description %></p>
            <% if @profile.user.role == 'candidate' %>
              <h3>Work Experience</h3>
              <%= render 'profiles/work_experience' %>
              <h3>Education</h3>
              <%= render 'profiles/school' %>
              <p>&nbsp;</p>
              <p><%= link_to @profile.resume_file_url, class: 'btn btn-primary btn-lg',target: "_blank" do %>
                <span><i class="fa fa-arrow-down" aria-hidden="true"></i> Download Resume<span>
              <% end %></p>
            <% end %>
            <hr>
            <% if @profile.user == 'company' %>
                <div id="map-canvas"></div>
            <% end %>
          </article>
        </div>
        <div class="col-sm-4" id="sidebar">
          <%= render 'profiles/social_network' %>
          <hr>
          <%= render 'profiles/contact' %>
          <% if @profile.user.role == 'candidate' %>
            <hr>
            <%= render 'profiles/skills' %>
          <% end %>
        </div>
      </div>
    </div>
    <div>
      <% if user_signed_in? %>
        <% if current_user == @profile.user %>
        <%= link_to 'Edit Profile', edit_profile_path(@profile), class: 'btn btn-danger pull-right', method: :get %>
        <% end %>
      <% end %>
    </div>
  </section>
  <script>
  function initialize()
    {
    //-----------------------------------------------------------------------
    // Create an array of styles.

    var styles = [
      {
      "stylers": [
        { "saturation": -100 },
        { "gamma": 1 }
      ]
      },{
        "featureType": "water",
        "stylers": [
          { "lightness": -12 }
        ]
      }
    ];

    //-----------------------------------------------------------------------
    // Create a new StyledMapType object, passing it the array of styles,
    // as well as the name to be displayed on the map type control.

    var styledMap = new google.maps.StyledMapType(styles, {
      name: "Styled Map"
    });

    //-----------------------------------------------------------------------
    // Set up map pin position

    var latlng = new google.maps.LatLng( -37.8181902 , 144.9541588);

    //-----------------------------------------------------------------------
    // Set up map options

    var myOptions =
    {
      scrollwheel: false,
      zoom: 13,
      center: latlng,
      mapTypeControlOptions: {
        mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']
      }
    };

    //-----------------------------------------------------------------------
    // Set up map ID's

    var map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);

    //-----------------------------------------------------------------------
    // Associate the styled map with the MapTypeId and set it to display.

    map.mapTypes.set('map_style', styledMap);
    map.setMapTypeId('map_style');

    //-----------------------------------------------------------------------
    // Setup up map pin image

    var image = {
      // Path to your map pin image
      url: 'http://res.cloudinary.com/dn40jh1kc/image/upload/v1479985556/map-marker_daqoul.png',
      // This marker is 40 pixels wide by 42 pixels tall.
      size: new google.maps.Size(40, 42),
      // The origin for this image is 0,0.
      origin: new google.maps.Point(0,0),
      // The anchor for this image is the base of the pin at 20,42.
      anchor: new google.maps.Point(20, 42)
    };

    //-----------------------------------------------------------------------
    // Add marker

    var myMarker = new google.maps.Marker({
      position: latlng,
      map: map,
      icon: image,
      clickable: true,
      title:"Coder Factory"
    });

    myMarker.info = new google.maps.InfoWindow({
      content: "<% @profile.address %>"
    });

    google.maps.event.addListener(myMarker, 'click', function() {
      myMarker.info.open(map, myMarker);
    });
    }

    google.maps.event.addDomListener(window, 'load', initialize);

  </script>
